!!! 5
html(lang='en')
head
    meta(charset='utf-8')
    title 网络硬盘demo
    meta(name='description', content='File Upload widget with multiple file selection, drag&drop support, progress bar and preview images for jQuery. Supports cross-domain, chunked and resumable file uploads. Works with any server-side platform (Google App Engine, PHP, Python, Ruby on Rails, Java, etc.) that supports standard HTML form file uploads.')
    //
       Bootstrap CSS Toolkit styles 
    link(rel='stylesheet', href='http://blueimp.github.com/cdn/css/bootstrap.min.css')
    //
       Generic page styles 
    link(rel='stylesheet', href='css/style.css')
    link(rel='stylesheet', href='css/easydialog.css')
    //
       Bootstrap styles for responsive website layout, supporting different screen sizes 
    link(rel='stylesheet', href='http://blueimp.github.com/cdn/css/bootstrap-responsive.min.css')
    //
       Bootstrap CSS fixes for IE6 
    //if lt IE 7
      link(rel='stylesheet', href='http://blueimp.github.com/cdn/css/bootstrap-ie6.min.css')
    //
       Bootstrap Image Gallery styles 
    link(rel='stylesheet', href='http://blueimp.github.com/Bootstrap-Image-Gallery/css/bootstrap-image-gallery.min.css')
    //
       CSS to style the file input field as button and adjust the Bootstrap progress bars 
    link(rel='stylesheet', href='css/jquery.fileupload-ui.css')
    //
       Shim to make HTML5 elements usable in older Internet Explorer versions 
    //if lt IE 9
      script(src='http://html5shim.googlecode.com/svn/trunk/html5.js')
    script(src='//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js')
    script(src='js/easydialog.min.js')
  body
    .navbar.navbar-fixed-top
      .navbar-inner
        .container
          a.btn.btn-navbar(data-toggle='collapse', data-target='.nav-collapse')
            span.icon-bar
            span.icon-bar
            span.icon-bar
          a.brand(href='https://github.com/blueimp/jQuery-File-Upload') jQueryFileUpload
          a.brand(href='https://github.com/felixge/node-formidable') Node-formidable
          .nav-collapse
            ul.nav
              li.active
                a(href='#') 网络硬盘demo
              li.slide
                a#login(href='#') 登录
              li
                a(href='/manage') 开发ing
    style
      #login-content{ border:1px solid #d3d3d3; padding:5px; background:#fff; width:220px; height:220px; }
    #login-content(style='display: none;')
      form(method='post', action='login.node')
        p
          label Username
          input.text-input(value='', name='user', type='text')
        br(style='clear: both;')
        p
          label Password
          input.text-input(name='pass', type='password')
        br(style='clear: both;')
        p
          input.button(type='submit', value='Sign In')
    script
      $("#login").click(function(){
      console.log("cnx");
      easyDialog.open({
      container:'login-content',
      fixed:true
      });
      })
    .container
      .page-header
        h1 网络硬盘(JQuery File Upload+formidable)
      //
            <blockquote>
                <p>File Upload widget with multiple file selection, drag&amp;drop support, progress bars and preview images for jQuery.<br>
                Supports cross-domain, chunked and resumable file uploads and client-side image resizing.<br>
                Works with any server-side platform (PHP, Python, Ruby on Rails, Java, Node.js, Go etc.) that supports standard HTML form file uploads.</p>
            </blockquote>
        	<br>--!>
            <!-- The file upload form used as target for the file upload widget 
      form#fileupload(action='upload.node', method='POST', enctype='multipart/form-data')
        //
           The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload 
        .row.fileupload-buttonbar
          .span7
            //
               The fileinput-button span is used to style the file input field as button 
            span.btn.btn-success.fileinput-button
              span
                i.icon-plus.icon-white
                | Add files...
              input(type='file', name='files[]', multiple='multiple')
            button.btn.btn-primary.start(type='submit')
              i.icon-upload.icon-white
              | Start upload
            button.btn.btn-warning.cancel(type='reset')
              i.icon-ban-circle.icon-white
              | Cancel upload
            button.btn.btn-danger.delete(type='button')
              i.icon-trash.icon-white
              | Delete
            input.toggle(type='checkbox')
          .span5
            //
               The global progress bar 
            .progress.progress-success.progress-striped.active.fade
              .bar(style='width: 0%;')
        //
           The loading indicator is shown during image processing 
        .fileupload-loading
        br
        //
           The table listing the files available for upload/download 
        table.table.table-striped
          tbody.files(data-toggle='modal-gallery', data-target='#modal-gallery')
      br
      .well
        h3 Notes
        ul
          li Chrome、Firefox、Safari支持拖动
          li 登录窗口esc关闭
      //
            <br>
            <div class="well">
                <h3>Demo Notes</h3>
                <ul>
                    <li>The maximum file size for uploads in this demo is <strong>5 MB</strong> (default file size is unlimited).</li>
                    <li>Only image files (<strong>JPG, GIF, PNG</strong>) are allowed in this demo (by default there is no file type restriction).</li>
                    <li>Uploaded files will be deleted automatically after <strong>5 minutes</strong> (demo setting).</li>
                    <li>You can <strong>drag &amp; drop</strong> files from your desktop on this webpage with Google Chrome, Mozilla Firefox and Apple Safari.</li>
                    <li>Please refer to the <a href="https://github.com/blueimp/jQuery-File-Upload">project website</a> and <a href="https://github.com/blueimp/jQuery-File-Upload/wiki">documentation</a> for more information.</li>
                    <li>Built with Twitter's <a href="http://twitter.github.com/bootstrap/">Bootstrap</a> toolkit and Icons from <a href="http://glyphicons.com/">Glyphicons</a>.</li>
                </ul>
        	</div>--!>
        </div>
        <!-- modal-gallery is the modal dialog used for the image gallery 
      #modal-gallery.modal.modal-gallery.hide.fade
        .modal-header
          a.close(data-dismiss='modal') ×
          h3.modal-title
        .modal-body
          .modal-image
        .modal-footer
          a.btn.btn-primary.modal-next
            | Next
            i.icon-arrow-right.icon-white
          a.btn.btn-info.modal-prev
            i.icon-arrow-left.icon-white
            | Previous
          a.btn.btn-success.modal-play.modal-slideshow(data-slideshow='5000')
            i.icon-play.icon-white
            | Slideshow
          a.btn.modal-download(target='_blank')
            i.icon-download
            | Download
      //
         The template to display files available for upload 
      script#template-upload(type='text/x-tmpl')
        {% for (var i=0, files=o.files, l=files.length, file=files[0]; i<l; file=files[++i]) { %}
        <tr class="template-upload fade">
        <td class="preview"><span class="fade"></span></td>
        <td class="name">{%=file.name%}</td>
        <td class="size">{%=o.formatFileSize(file.size)%}</td>
        {% if (file.error) { %}
        <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
        {% } else if (o.files.valid && !i) { %}
        <td>
        <div class="progress progress-success progress-striped active"><div class="bar" style="width:0%;"></div></div>
        </td>
        <td class="start">{% if (!o.options.autoUpload) { %}
        <button class="btn btn-primary">
        <i class="icon-upload icon-white"></i> {%=locale.fileupload.start%}
        </button>
        {% } %}</td>
        {% } else { %}
        <td colspan="2"></td>
        {% } %}
        <td class="cancel">{% if (!i) { %}
        <button class="btn btn-warning">
        <i class="icon-ban-circle icon-white"></i> {%=locale.fileupload.cancel%}
        </button>
        {% } %}</td>
        </tr>
        {% } %}
      //
         The template to display files available for download 
      script#template-download(type='text/x-tmpl')
        {% for (var i=0, files=o.files, l=files.length, file=files[0]; i<l; file=files[++i]) { %}
        <tr class="template-download fade">
        {% if (file.error) { %}
        <td></td>
        <td class="name">{%=file.name%}</td>
        <td class="size">{%=o.formatFileSize(file.size)%}</td>
        <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
        {% } else { %}
        <td class="preview">{% if (file.thumbnail_url) { %}
        <a href="{%=file.url%}" title="{%=file.name%}" rel="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>
        {% } %}</td>
        <td class="name">
        <a href="{%=file.url%}" title="{%=file.name%}" rel="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
        </td>
        <td class="size">{%=o.formatFileSize(file.size)%}</td>
        <td colspan="2"></td>
        {% } %}
        <td class="delete">
        <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}">
        <i class="icon-trash icon-white"></i> {%=locale.fileupload.destroy%}
        </button>
        <input type="checkbox" name="delete" value="1">
        </td>
        </tr>
        {% } %}
      //
         The jQuery UI widget factory, can be omitted if jQuery UI is already included 
      script(src='js/vendor/jquery.ui.widget.js')
      //
         The Templates plugin is included to render the upload/download listings 
      script(src='js/tmpl.min.js')
      //
         The Load Image plugin is included for the preview images and image resizing functionality 
      script(src='js/load-image.min.js')
      //
         The Canvas to Blob plugin is included for image resizing functionality 
      script(src='js/canvas-to-blob.min.js')
      //
         Bootstrap JS and Bootstrap Image Gallery are not required, but included for the demo 
      script(src='js/bootstrap.min.js')
      script(src='js/bootstrap-image-gallery.min.js')
      //
         The Iframe Transport is required for browsers without support for XHR file uploads 
      script(src='js/jquery.iframe-transport.js')
      //
         The basic File Upload plugin 
      script(src='js/jquery.fileupload.js')
      //
         The File Upload image processing plugin 
      script(src='js/jquery.fileupload-ip.js')
      //
         The File Upload user interface plugin 
      script(src='js/jquery.fileupload-ui.js')
      //
         The localization script 
      script(src='js/locale.js')
      //
         The main application script 
      script(src='js/main.js')
      //
         The XDomainRequest Transport is included for cross-domain file deletion for IE8+ 
      //if gte IE 8
        script(src='js/cors/jquery.xdr-transport.js')

